<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Cyber Threat Analyzer</title>

<style>
body{
  margin:0;
  font-family:Consolas, monospace;
  background:black;
  color:#00ff9c;
  overflow:hidden;
}

/* Matrix background */
canvas{
  position:fixed;
  top:0;
  left:0;
  z-index:-1;
}

/* Panel */
.panel{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:600px;
  background:rgba(0,0,0,.85);
  border:1px solid #00ff9c;
  padding:25px;
  box-shadow:0 0 30px #00ff9c;
}

h1{text-align:center;}

textarea{
  width:100%;
  height:120px;
  background:black;
  border:1px solid #00ff9c;
  color:#00ff9c;
  padding:10px;
}

button{
  width:100%;
  margin-top:15px;
  padding:12px;
  background:black;
  border:1px solid #00ff9c;
  color:#00ff9c;
  cursor:pointer;
}

button:hover{
  background:#00ff9c;
  color:black;
}

#output{
  margin-top:20px;
  border-top:1px solid #00ff9c;
  padding-top:10px;
  display:none;
}

.safe{color:#00ff9c;}
.medium{color:orange;}
.high{color:#ff3b3b;}
.critical{color:red;font-weight:bold;}
</style>
</head>
<body>

<canvas id="matrix"></canvas>

<div class="panel">
<h1>CYBER THREAT ANALYZER</h1>

<textarea id="message" placeholder="اكتب الرسالة أو الرابط المشبوه"></textarea>
<button onclick="analyze()">SCAN TARGET</button>

<div id="output">
<p>STATUS: <span id="status"></span></p>
<p>MITRE TECHNIQUE: <span id="tech"></span></p>
<p>DESCRIPTION: <span id="desc"></span></p>
<p>REASON: <span id="reason"></span></p>
</div>
</div>

<script>

/* ===== Matrix Effect ===== */
const canvas=document.getElementById("matrix");
const ctx=canvas.getContext("2d");
canvas.height=window.innerHeight;
canvas.width=window.innerWidth;

let letters="01".split("");
let fontSize=14;
let columns=canvas.width/fontSize;
let drops=[];
for(let x=0;x<columns;x++)drops[x]=1;

function draw(){
ctx.fillStyle="rgba(0,0,0,0.05)";
ctx.fillRect(0,0,canvas.width,canvas.height);
ctx.fillStyle="#00ff9c";
ctx.font=fontSize+"px monospace";

for(let i=0;i<drops.length;i++){
let text=letters[Math.floor(Math.random()*letters.length)];
ctx.fillText(text,i*fontSize,drops[i]*fontSize);
if(drops[i]*fontSize>canvas.height && Math.random()>0.975)drops[i]=0;
drops[i]++;
}
}
setInterval(draw,33);

/* ===== صوت ===== */
function speak(t){
speechSynthesis.cancel();
let m=new SpeechSynthesisUtterance(t);
m.lang="ar-SA";
speechSynthesis.speak(m);
}

window.onload=()=>speak("نظام تحليل التهديدات جاهز");

/* ===== التحليل ===== */
function analyze(){

let text=document.getElementById("message").value.toLowerCase();
if(!text){speak("ادخل رسالة");return;}

let score=0,reason=[],mitre=[];

// سلوكيات
if(/عاجل|موقوف|ايقاف|urgent/.test(text)){
score+=2;reason.push("ضغط نفسي");mitre.push("T1598 Phishing");
}

if(/http/.test(text)){
score+=3;reason.push("رابط احتيالي");mitre.push("T1566.002 Spearphishing Link");
}

if(/otp|password|cvv|visa|حساب|bank/.test(text)){
score+=4;reason.push("طلب بيانات حساسة");mitre.push("T1556 Credential Harvesting");
}

if(/\.xyz|\.ru|bit\.ly|tinyurl/.test(text)){
score+=4;reason.push("دومين مشبوه");mitre.push("T1583 Infrastructure");
}

// التصنيف
let status="SAFE",level="safe",desc="لا يوجد تهديد";

if(score>=8){status="CRITICAL PHISHING";level="critical";desc="هجوم متقدم";}
else if(score>=5){status="PHISHING";level="high";desc="محاولة احتيال";}
else if(score>=2){status="SUSPICIOUS";level="medium";desc="هندسة اجتماعية";}

// عرض
const statusEl=document.getElementById("status");
const techEl=document.getElementById("tech");
const descEl=document.getElementById("desc");
const reasonEl=document.getElementById("reason");
const output=document.getElementById("output");

output.style.display="block";
output.className=level;

statusEl.innerText=status;
techEl.innerText=[...new Set(mitre)].join(" | ");
descEl.innerText=desc;
reasonEl.innerText=reason.join(" , ");

speak("نتيجة الفحص " + status);
}

</script>
</body>
</html>
</html>
