<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Aegis Sentinelâ„¢ï¸ V2 Ultimate</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
margin:0;
font-family:'Cairo',sans-serif;
background:radial-gradient(circle at top,#001a12,#000);
color:#00ffb3;
transition:0.3s;
}

header{
text-align:center;
padding:20px;
border-bottom:1px solid #00ffb333;
}

.lang-switch{
margin-top:10px;
}

button{
background:#000;
color:#00ffb3;
border:1px solid #00ffb3;
padding:6px 14px;
border-radius:8px;
cursor:pointer;
margin:3px;
}

.container{
max-width:1100px;
margin:20px auto;
padding:25px;
background:rgba(0,20,15,0.9);
border-radius:20px;
}

textarea{
width:100%;
height:130px;
background:#000;
border:2px solid #00ffb3;
border-radius:15px;
padding:15px;
color:#00ffb3;
font-size:15px;
resize:none;
transition: all 0.3s ease; /* Smooth animation */
}

textarea:hover{
box-shadow:0 0 25px #00ffb3;
transform: scale(1.02);
border-color:#00fff0;
}

.flex{
display:flex;
gap:20px;
flex-wrap:wrap;
margin-top:20px;
}

.card{
flex:1;
min-width:280px;
background:#000;
padding:20px;
border-radius:15px;
box-shadow:0 0 20px #00ffb322;
}

.progress{
height:12px;
background:#111;
border-radius:10px;
margin-top:10px;
}

.bar{
height:100%;
width:0%;
background:#00ffb3;
border-radius:10px;
transition:0.5s;
}

footer{
text-align:center;
padding:15px;
font-size:12px;
border-top:1px solid #00ffb333;
}
</style>
</head>

<body>

<header>
<h1 id="title">ğŸ›¡ Aegis Sentinelâ„¢ï¸</h1>
<p id="subtitle">Cyber Threat Intelligence Platform</p>

<div class="lang-switch">
<button onclick="setLang('en')">English</button>
<button onclick="setLang('ar')">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
</div>
</header>

<div class="container">

<textarea id="msg" placeholder="Paste suspicious message here for real-time analysis..."></textarea>

<div class="flex">

<div class="card">
<h3 id="threatLabel">Threat Status</h3>
<p id="status">â€”</p>
<p><span id="riskText">Risk Score</span>: <span id="score">0</span>%</p>
<div class="progress"><div class="bar" id="bar"></div></div>
<p id="classification"></p>
<p><strong>Domain Reputation:</strong> <span id="domainRep">â€”</span></p>
</div>

<div class="card">
<h3>MITRE Mapping</h3>
<p id="mitre">â€”</p>
<h3 id="feedLabel">Live Feed</h3>
<p id="feed">System Ready...</p>
</div>

<div class="card">
<h3 id="statsLabel">Statistics</h3>
<canvas id="chart"></canvas>
</div>

</div>
</div>

<footer>
Aegis Sentinelâ„¢ï¸ â€“ Educational SOC Simulation Platform
</footer>

<!-- Sounds -->
<audio id="highSound"><source src="https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3"></audio>
<audio id="mediumSound"><source src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"></audio>
<audio id="safeSound"><source src="https://assets.mixkit.co/active_storage/sfx/270/270-preview.mp3"></audio>
<audio id="switchSound"><source src="https://assets.mixkit.co/active_storage/sfx/2562/2562-preview.mp3"></audio>
<audio id="hoverSound"><source src="https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3"></audio>

<script>
// ====== Variables ======
let lang = 'en'; // default
let stats = {safe:0,medium:0,high:0};

// ====== Language Data ======
const texts = {
en:{
title:"ğŸ›¡ Aegis Sentinelâ„¢ï¸",
subtitle:"Cyber Threat Intelligence Platform",
threatLabel:"Threat Status",
riskText:"Risk Score",
statsLabel:"Statistics",
feedLabel:"Live Feed",
statusSafe:"Safe",
statusMedium:"Suspicious",
statusHigh:"High Risk",
classificationSafe:"Low Risk Content",
classificationMedium:"Suspicious Social Engineering",
classificationHigh:"Advanced Phishing Attack",
feedReady:"System Ready..."
},
ar:{
title:"ğŸ›¡ Ø£ÙŠØ¬ÙŠØ³ Ø³Ù†ØªÙŠÙ†Ù„â„¢ï¸",
subtitle:"Ù…Ù†ØµØ© Ø§Ø³ØªØ®Ø¨Ø§Ø±Ø§Øª ØªÙ‡Ø¯ÙŠØ¯Ø§Øª Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠØ©",
threatLabel:"Ø­Ø§Ù„Ø© Ø§Ù„ØªÙ‡Ø¯ÙŠØ¯",
riskText:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø®Ø·ÙˆØ±Ø©",
statsLabel:"Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª",
feedLabel:"Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©",
statusSafe:"Ø¢Ù…Ù†",
statusMedium:"Ù…Ø´Ø¨ÙˆÙ‡",
statusHigh:"Ø®Ø·Ø± Ø¹Ø§Ù„ÙŠ",
classificationSafe:"Ù…Ø­ØªÙˆÙ‰ Ù…Ù†Ø®ÙØ¶ Ø§Ù„Ø®Ø·ÙˆØ±Ø©",
classificationMedium:"ØªØµÙŠØ¯ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ Ù…Ø´Ø¨ÙˆÙ‡",
classificationHigh:"Ù‡Ø¬ÙˆÙ… ØªØµÙŠÙ‘Ø¯ Ù…ØªÙ‚Ø¯Ù…",
feedReady:"Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø²..."
}
};

// ====== Set Language ======
function setLang(l){
lang = l;
document.getElementById("title").innerText = texts[lang].title;
document.getElementById("subtitle").innerText = texts[lang].subtitle;
document.getElementById("threatLabel").innerText = texts[lang].threatLabel;
document.getElementById("riskText").innerText = texts[lang].riskText;
document.getElementById("statsLabel").innerText = texts[lang].statsLabel;
document.getElementById("feedLabel").innerText = texts[lang].feedLabel;
document.getElementById("feed").innerText = texts[lang].feedReady;
playSound('switch');
}

// ====== Sounds ======
function playSound(type){
let audio;
if(type==='high') audio=document.getElementById('highSound');
else if(type==='medium') audio=document.getElementById('mediumSound');
else if(type==='safe') audio=document.getElementById('safeSound');
else if(type==='switch') audio=document.getElementById('switchSound');
else if(type==='hover') audio=document.getElementById('hoverSound');
if(audio){ audio.currentTime=0; audio.play();}
}

// ====== Text-to-Speech ======
function speak(text){
let s = new SpeechSynthesisUtterance(text);
s.lang = lang==='ar' ? 'ar-SA' : 'en-US';
speechSynthesis.cancel();
speechSynthesis.speak(s);
}

// ====== Patterns ======
const patterns = {
urgency:/verify your account|ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„Ø¢Ù†|Ø³ÙŠØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø­Ø³Ø§Ø¨Ùƒ|Ù†Ø´Ø§Ø· ØºÙŠØ± Ù…Ø¹ØªØ§Ø¯/i,
sensitive:/otp|cvv|Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©|ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±|iban/i,
links:/https?:\/\/|\.ru|\.xyz|bit\.ly|secure-login|verify-now/i,
financial:/Ø§Ø³ØªØ±Ø¯Ø§Ø¯|refund|Ø¯ÙØ¹Ø© Ù…Ø¹Ù„Ù‚Ø©/i,
puny:/xn--/i
};

// ====== Domain Reputation ======
function domainReputation(text){
let match=text.match(/https?:\/\/([^\/\s]+)/);
if(!match) return lang==='ar'?"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¯ÙˆÙ…ÙŠÙ†":"No Domain Detected";
let domain=match[1];
if(domain.includes(".ru")||domain.includes(".xyz")) return lang==='ar'?"Ù†Ø·Ø§Ù‚ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø®Ø·ÙˆØ±Ø©":"High Risk TLD";
if(domain.includes("xn--")) return lang==='ar'?"Ù…Ø±ÙŠØ¨ Punycode":"Punycode Suspicious";
if(domain.includes("secure")||domain.includes("verify")) return lang==='ar'?"ØªÙ„Ø§Ø¹Ø¨ Ø¨Ø§Ù„ÙƒÙ„Ù…Ø§Øª":"Keyword Manipulation";
return lang==='ar'?"Ù…Ø¬Ù‡ÙˆÙ„ / Ù…ØªÙˆØ³Ø· Ø§Ù„Ø®Ø·ÙˆØ±Ø©":"Unknown / Medium Risk";
}

// ====== Analyze Function ======
function analyze(){
let t=document.getElementById("msg").value.toLowerCase();
if(t.length<5) return;

let score=0, mitre=[];

if(patterns.urgency.test(t)){score+=25; mitre.push("T1566");}
if(patterns.sensitive.test(t)){score+=30; mitre.push("T1555");}
if(patterns.links.test(t)){score+=25; mitre.push("T1204");}
if(patterns.financial.test(t)){score+=20;}
if(patterns.puny.test(t)){score+=20;}

let domainStatus=domainReputation(t);
if(domainStatus==="High Risk TLD"||domainStatus==="Ù†Ø·Ø§Ù‚ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø®Ø·ÙˆØ±Ø©") score+=25;
if(domainStatus==="Punycode Suspicious"||domainStatus==="Ù…Ø±ÙŠØ¨ Punycode") score+=30;

if(score>100) score=100;

let status="", classification="";

if(score>=75){status=texts[lang].statusHigh;classification=texts[lang].classificationHigh; stats.high++; playSound('high');}
else if(score>=40){status=texts[lang].statusMedium;classification=texts[lang].classificationMedium; stats.medium++; playSound('medium');}
else{status=texts[lang].statusSafe; classification=texts[lang].classificationSafe; stats.safe++; playSound('safe');}

document.getElementById("status").innerText=status;
document.getElementById("score").innerText=score;
document.getElementById("bar").style.width=score+"%";
document.getElementById("classification").innerText=classification;
document.getElementById("mitre").innerText=mitre.join(", ")||"â€”";
document.getElementById("domainRep").innerText=domainStatus;
document.getElementById("feed").innerText = status + " (" + score + "%) - " + new Date().toLocaleTimeString();

speak(`${status}. ${classification}. Score ${score}%.`);

updateChart();
}

// ====== Event Listener ======
const msgBox = document.getElementById("msg");
msgBox.addEventListener("input",analyze);
msgBox.addEventListener("mouseenter", ()=>playSound('hover'));

// ====== Chart ======
let chart=new Chart(document.getElementById("chart"),{
type:'doughnut',
data:{
labels:['Safe','Suspicious','High Risk'],
datasets:[{data:[0,0,0], backgroundColor:['#00ffb3','#ffd633','#ff4d4d'] }]
}
});
function updateChart(){ chart.data.datasets[0].data=[stats.safe,stats.medium,stats.high]; chart.update();}
</script>

</body>
</html>
